<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Портфолио — Аникеев Егор</title>
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="container header__inner">
            <div class="header__brand interactive" tabindex="0" role="link" aria-label="Главная">
                <img src="img/logo.png" alt="Логотип" class="header__logo" />
                <div class="header__title">
                    <div class="fw-semibold">Аникеев Егор</div>
                    <div class="text-muted small">Студент</div>
                </div>
            </div>
            <nav class="nav" aria-label="Главная навигация">
                <a class="nav__link interactive" href="index.html">Главная</a>
                <a class="nav__link interactive" href="projects.html">Проекты</a>
                <a class="nav__link interactive" href="diary.html">Дневник</a>
                <a class="nav__link interactive" href="contacts.html">Контакты</a>
            </nav>
        </div>
    </header>

    <main class="main">
        <section class="profile container" aria-labelledby="profile-heading">
            <h1 id="profile-heading" class="visually-hidden">Профиль</h1>
            
            <div class="profile__top">
                <div class="profile__photo">
                    <picture>
                        <source srcset="img/logo.png" type="image/png">
                        <img src="img/logo.png" alt="Фото" class="profile__photo-img interactive" />
                    </picture>
                </div>

                <div class="profile__info">
                    <div class="profile__name">Привет! Я студент</div>
                    <div class="profile__text">Группа ЭФБ0-03-24</div>
                    <div class="profile__text">Увлекаюсь веб-разработкой</div>
                    <a class="btn btn-primary btn-resume interactive" href="#" download aria-label="Скачать резюме Аникеева Егора">Скачать резюме</a>
                </div>
            </div>

            <section class="split-grid mt-4">
                <div class="split-left">
                    <div class="small-cards">
                        <article class="card small-card interactive" tabindex="0">
                            <img src="img/proj1.webp" alt="proj1" class="small-card__img" />
                            <div class="small-card__info">
                                <div class="small-card__title">Мой личный сайт</div>
                                <div class="small-card__tech">HTML, CSS</div>
                            </div>
                        </article>

                        <article class="card small-card interactive" tabindex="0">
                            <img src="img/proj2.png" alt="proj2" class="small-card__img" />
                            <div class="small-card__info">
                                <div class="small-card__title">Todo-приложение</div>
                                <div class="small-card__tech">JavaScript</div>
                            </div>
                        </article>
                    </div>

                    <section class="skills">
                        <h3 class="skills__title">Мои навыки</h3>
                        <div class="skills__list">
                            <div class="skill">
                                <div class="skill__name">HTML/CSS</div>
                                <div class="skill__bar" aria-hidden="true">
                                    <div class="skill__fill" style="width:90%"></div>
                                </div>
                                <div class="skill__percent">90%</div>
                            </div>

                            <div class="skill">
                                <div class="skill__name">JavaScript</div>
                                <div class="skill__bar">
                                    <div class="skill__fill" style="width:80%"></div>
                                </div>
                                <div class="skill__percent">80%</div>
                            </div>

                            <div class="skill">
                                <div class="skill__name">React</div>
                                <div class="skill__bar">
                                    <div class="skill__fill" style="width:60%"></div>
                                </div>
                                <div class="skill__percent">60%</div>
                            </div>
                        </div>
                    </section>
                </div>

                <div class="split-right">
                    <article class="featured interactive" tabindex="0">
                        <picture>
                            <source media="(max-width: 600px)" srcset="img/proj4-small.png">
                            <source media="(min-width: 601px)" srcset="img/proj4.png">
                            <img src="img/proj4.png" alt="Featured project" class="featured__img" />
                        </picture>
                        <div class="featured__overlay">
                            <h3 class="featured__title">Крупный проект</h3>
                            <p class="featured__desc">очень крупный</p>
                        </div>
                    </article>
                </div>
            </section>

            <section class="bottom-grid mt-4" aria-labelledby="bottom-title">
                <h2 id="bottom-title" class="visually-hidden">Проекты и контакты</h2>

                <div class="bottom-left">
                    <h3 class="projects__heading">Лучшие проекты</h3>
                    <div class="projects__grid">
                        <article class="project-card interactive" tabindex="0">
                            <img src="img/proj1.webp" alt="proj1" class="project-card__img" />
                            <div class="project-card__body">
                                <div class="project-card__title">Личный сайт</div>
                                <div class="project-card__tech">HTML, CSS</div>
                            </div>
                        </article>

                        <article class="project-card interactive" tabindex="0">
                            <img src="img/proj2.png" alt="proj2" class="project-card__img" />
                            <div class="project-card__body">
                                <div class="project-card__title">Todo-приложение</div>
                                <div class="project-card__tech">JavaScript</div>
                            </div>
                        </article>

                        <article class="project-card interactive" tabindex="0">
                            <img src="img/proj3.png" alt="proj3" class="project-card__img" />
                            <div class="project-card__body">
                                <div class="project-card__title">Интернет-магазин</div>
                                <div class="project-card__tech">React</div>
                            </div>
                        </article>

                        <article class="project-card interactive" tabindex="0">
                            <img src="img/stul.png" alt="stul" class="project-card__img" />
                            <div class="project-card__body">
                                <div class="project-card__title">Стул</div>
                                <div class="project-card__tech">Кресло</div>
                            </div>
                        </article>
                    </div>
                </div>

                <aside class="bottom-right">
                    <section class="contacts">
                        <h2 class="contacts__title">Свяжитесь со мной</h2>

                        <form class="contacts__form" id="contactsForm" novalidate>
                            <label class="form-row">
                                <span class="form-label">Имя</span>
                                <input type="text" id="name" name="name" class="form-input interactive" placeholder="Ваше имя" required>
                            </label>

                            <label class="form-row">
                                <span class="form-label">Email</span>
                                <input type="email" id="email" name="email" class="form-input interactive" placeholder="example@mail.ru" required>
                            </label>

                            <label class="form-row">
                                <span class="form-label">Сообщение</span>
                                <textarea id="message" name="message" class="form-input interactive" rows="5" placeholder="Введите сообщение..." required></textarea>
                            </label>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary interactive">Отправить сообщение</button>
                            </div>
                        </form>

                        <div id="formStatus" class="visually-hidden" role="status" aria-live="polite" aria-atomic="true"></div>
                    </section>
                </aside>
            </section>
        </section>

        <footer class="footer container">
            <div>© 2025 Контакты: +7 (900) 000-00-00</div>
        </footer>
    </main>

    <div class="overlay" id="overlay" tabindex="-1" aria-hidden="true"></div>
    <div class="modal" id="submitModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc" tabindex="-1" aria-hidden="true">
        <h2 id="modalTitle">Сообщение отправлено</h2>
        <p id="modalDesc">Спасибо.</p>
        <button type="button" class="close-btn" id="modalClose" aria-label="Закрыть">✕ <span class="visually-hidden">Закрыть окно</span></button>
    </div>

    <script>
        (function() {
            const form = document.getElementById('contactsForm');
            const overlay = document.getElementById('overlay');
            const modal = document.getElementById('submitModal');
            const closeBtn = document.getElementById('modalClose');
            const statusRegion = document.getElementById('formStatus');
            const mainContent = document.querySelector('main');
            let previousActiveElement = null;
            let trapListener = null;

            function openModal(message) {
                if (statusRegion) statusRegion.textContent = message || 'Сообщение отправлено';
                previousActiveElement = document.activeElement;
                overlay.style.display = 'block';
                modal.style.display = 'block';
                overlay.removeAttribute('aria-hidden');
                modal.removeAttribute('aria-hidden');
                
                if (mainContent) mainContent.setAttribute('aria-hidden', 'true');
                
                modal.focus();
                document.addEventListener('keydown', handleKeyDown);
                
                enableFocusTrap(modal);
            }

            function closeModal() {
                overlay.style.display = 'none';
                modal.style.display = 'none';
                overlay.setAttribute('aria-hidden', 'true');
                modal.setAttribute('aria-hidden', 'true');
                if (mainContent) mainContent.removeAttribute('aria-hidden');
                
                if (previousActiveElement && typeof previousActiveElement.focus === 'function') {
                    previousActiveElement.focus();
                }
                document.removeEventListener('keydown', handleKeyDown);
                disableFocusTrap();
            }

            function handleKeyDown(e) {
                if (e.key === 'Escape') {
                    closeModal();
                }
            }


            function enableFocusTrap(container) {
                const selector = 'a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])';
                const focusable = Array.from(container.querySelectorAll(selector));
                if (focusable.length === 0) return;
                
                const first = focusable[0];
                const last = focusable[focusable.length - 1];
                
                trapListener = function(e) {
                    if (e.key !== 'Tab') return;
                    
                    if (e.shiftKey && document.activeElement === first) {
                        e.preventDefault();
                        last.focus();
                    } else if (!e.shiftKey && document.activeElement === last) {
                        e.preventDefault();
                        first.focus();
                    }
                };
                
                container.addEventListener('keydown', trapListener);
            }

            function disableFocusTrap() {
                if (trapListener) {
                    modal.removeEventListener('keydown', trapListener);
                    trapListener = null;
                }
            }

            overlay.addEventListener('click', closeModal);
            closeBtn.addEventListener('click', closeModal);

            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    if (!form.checkValidity()) {
                        form.reportValidity();
                        return;
                    }
                    
                    openModal('Ваше сообщение успешно отправлено!');
                    form.reset();
                });
            }
        })();
    </script>
</body>
</html>